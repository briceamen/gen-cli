// Code generated by generative-cli. DO NOT EDIT.
package commands

import (
	"context"
	"fmt"

	scalingo "github.com/Scalingo/go-scalingo/v8"
	"github.com/spf13/cobra"

	"generative-cli/config"
	"generative-cli/render"
)

var alertsListCmd = &cobra.Command{
	Use:   "list",
	Short: "Alerts list",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		result, err := client.AlertsList(ctx, app)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initalertsListCmd() {

	alertsListCmd.Flags().String("app", "", "app parameter")

	alertsListCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var alertsAlertAddCmd = &cobra.Command{
	Use:   "alert-add",
	Short: "Alerts alert-add",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		containerTypeFlag, _ := cmd.Flags().GetString("container-type")

		metricFlag, _ := cmd.Flags().GetString("metric")

		limitFlag, _ := cmd.Flags().GetFloat64("limit")

		disabledFlag, _ := cmd.Flags().GetBool("disabled")

		sendWhenBelowFlag, _ := cmd.Flags().GetBool("send-when-below")

		notifiersFlag, _ := cmd.Flags().GetStringSlice("notifiers")

		params := scalingo.AlertAddParams{
			ContainerType: containerTypeFlag,
			Metric:        metricFlag,
			Limit:         limitFlag,
			Disabled:      disabledFlag,
			SendWhenBelow: sendWhenBelowFlag,
			Notifiers:     notifiersFlag,
		}

		result, err := client.AlertAdd(ctx, app, params)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initalertsAlertAddCmd() {

	alertsAlertAddCmd.Flags().String("app", "", "app parameter")

	alertsAlertAddCmd.Flags().String("container-type", "", "ContainerType field")

	alertsAlertAddCmd.Flags().String("metric", "", "Metric field")

	alertsAlertAddCmd.Flags().Float64("limit", 0, "Limit field")

	alertsAlertAddCmd.Flags().Bool("disabled", false, "Disabled field")

	alertsAlertAddCmd.Flags().Bool("send-when-below", false, "SendWhenBelow field")

	alertsAlertAddCmd.Flags().StringSlice("notifiers", nil, "Notifiers field")

	alertsAlertAddCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var alertsAlertShowCmd = &cobra.Command{
	Use:   "alert-show",
	Short: "Alerts alert-show",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		id, _ := cmd.Flags().GetString("id")

		result, err := client.AlertShow(ctx, app, id)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initalertsAlertShowCmd() {

	alertsAlertShowCmd.Flags().String("app", "", "app parameter")

	alertsAlertShowCmd.Flags().String("id", "", "id parameter")

	alertsAlertShowCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var alertsAlertUpdateCmd = &cobra.Command{
	Use:   "alert-update",
	Short: "Alerts alert-update",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		id, _ := cmd.Flags().GetString("id")

		containerTypeFlag, _ := cmd.Flags().GetString("container-type")

		metricFlag, _ := cmd.Flags().GetString("metric")

		limitFlag, _ := cmd.Flags().GetFloat64("limit")

		disabledFlag, _ := cmd.Flags().GetBool("disabled")

		sendWhenBelowFlag, _ := cmd.Flags().GetBool("send-when-below")

		notifiersFlag, _ := cmd.Flags().GetStringSlice("notifiers")

		params := scalingo.AlertUpdateParams{
			ContainerType: &containerTypeFlag,
			Metric:        &metricFlag,
			Limit:         &limitFlag,
			Disabled:      &disabledFlag,
			SendWhenBelow: &sendWhenBelowFlag,
			Notifiers:     &notifiersFlag,
		}

		result, err := client.AlertUpdate(ctx, app, id, params)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initalertsAlertUpdateCmd() {

	alertsAlertUpdateCmd.Flags().String("app", "", "app parameter")

	alertsAlertUpdateCmd.Flags().String("id", "", "id parameter")

	alertsAlertUpdateCmd.Flags().String("container-type", "", "ContainerType field")

	alertsAlertUpdateCmd.Flags().String("metric", "", "Metric field")

	alertsAlertUpdateCmd.Flags().Float64("limit", 0, "Limit field")

	alertsAlertUpdateCmd.Flags().Bool("disabled", false, "Disabled field")

	alertsAlertUpdateCmd.Flags().Bool("send-when-below", false, "SendWhenBelow field")

	alertsAlertUpdateCmd.Flags().StringSlice("notifiers", nil, "Notifiers field")

	alertsAlertUpdateCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var alertsAlertRemoveCmd = &cobra.Command{
	Use:   "alert-remove",
	Short: "Alerts alert-remove",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		app, _ := cmd.Flags().GetString("app")

		id, _ := cmd.Flags().GetString("id")

		if err := client.AlertRemove(ctx, app, id); err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(render.RenderSuccess("alert-remove completed successfully"))

		return nil
	},
}

func initalertsAlertRemoveCmd() {

	alertsAlertRemoveCmd.Flags().String("app", "", "app parameter")

	alertsAlertRemoveCmd.Flags().String("id", "", "id parameter")

	alertsAlertRemoveCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

// RegisterAlertsServiceCommands registers all generated commands with the parent
func RegisterAlertsServiceCommands(parent *cobra.Command) {
	serviceCmd := &cobra.Command{
		Use:   "alerts",
		Short: "AlertsService operations",
	}

	initalertsListCmd()
	serviceCmd.AddCommand(alertsListCmd)

	initalertsAlertAddCmd()
	serviceCmd.AddCommand(alertsAlertAddCmd)

	initalertsAlertShowCmd()
	serviceCmd.AddCommand(alertsAlertShowCmd)

	initalertsAlertUpdateCmd()
	serviceCmd.AddCommand(alertsAlertUpdateCmd)

	initalertsAlertRemoveCmd()
	serviceCmd.AddCommand(alertsAlertRemoveCmd)

	parent.AddCommand(serviceCmd)
}
