// Code generated by generative-cli. DO NOT EDIT.
package commands

import (
	"context"
	"fmt"

	scalingo "github.com/Scalingo/go-scalingo/v8"
	"github.com/spf13/cobra"

	"generative-cli/config"
	"generative-cli/render"
)

var databasesDatabaseShowCmd = &cobra.Command{
	Use:   "database-show",
	Short: "Databases database-show",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		addonID, _ := cmd.Flags().GetString("addon-i-d")

		result, err := client.DatabaseShow(ctx, app, addonID)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initdatabasesDatabaseShowCmd() {

	databasesDatabaseShowCmd.Flags().StringP("app", "a", "", "app parameter")

	databasesDatabaseShowCmd.Flags().String("addon-i-d", "", "addonID parameter")

	databasesDatabaseShowCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var databasesDatabaseEnableFeatureCmd = &cobra.Command{
	Use:   "database-enable-feature",
	Short: "Databases database-enable-feature",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		addonID, _ := cmd.Flags().GetString("addon-i-d")

		feature, _ := cmd.Flags().GetString("feature")

		result, err := client.DatabaseEnableFeature(ctx, app, addonID, feature)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initdatabasesDatabaseEnableFeatureCmd() {

	databasesDatabaseEnableFeatureCmd.Flags().StringP("app", "a", "", "app parameter")

	databasesDatabaseEnableFeatureCmd.Flags().String("addon-i-d", "", "addonID parameter")

	databasesDatabaseEnableFeatureCmd.Flags().String("feature", "", "feature parameter")

	databasesDatabaseEnableFeatureCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var databasesDatabaseDisableFeatureCmd = &cobra.Command{
	Use:   "database-disable-feature",
	Short: "Databases database-disable-feature",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		addonID, _ := cmd.Flags().GetString("addon-i-d")

		feature, _ := cmd.Flags().GetString("feature")

		result, err := client.DatabaseDisableFeature(ctx, app, addonID, feature)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initdatabasesDatabaseDisableFeatureCmd() {

	databasesDatabaseDisableFeatureCmd.Flags().StringP("app", "a", "", "app parameter")

	databasesDatabaseDisableFeatureCmd.Flags().String("addon-i-d", "", "addonID parameter")

	databasesDatabaseDisableFeatureCmd.Flags().String("feature", "", "feature parameter")

	databasesDatabaseDisableFeatureCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var databasesDatabaseUpdatePeriodicBackupsConfigCmd = &cobra.Command{
	Use:   "database-update-periodic-backups-config",
	Short: "Databases database-update-periodic-backups-config",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		addonID, _ := cmd.Flags().GetString("addon-i-d")

		scheduledAtFlag, _ := cmd.Flags().GetInt("scheduled-at")

		enabledFlag, _ := cmd.Flags().GetBool("enabled")

		params := scalingo.DatabaseUpdatePeriodicBackupsConfigParams{
			ScheduledAt: &scheduledAtFlag,
			Enabled:     &enabledFlag,
		}

		result, err := client.DatabaseUpdatePeriodicBackupsConfig(ctx, app, addonID, params)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initdatabasesDatabaseUpdatePeriodicBackupsConfigCmd() {

	databasesDatabaseUpdatePeriodicBackupsConfigCmd.Flags().StringP("app", "a", "", "app parameter")

	databasesDatabaseUpdatePeriodicBackupsConfigCmd.Flags().String("addon-i-d", "", "addonID parameter")

	databasesDatabaseUpdatePeriodicBackupsConfigCmd.Flags().Int("scheduled-at", 0, "ScheduledAt field")

	databasesDatabaseUpdatePeriodicBackupsConfigCmd.Flags().Bool("enabled", false, "Enabled field")

	databasesDatabaseUpdatePeriodicBackupsConfigCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var databasesDatabaseUpdateMaintenanceWindowCmd = &cobra.Command{
	Use:   "database-update-maintenance-window",
	Short: "Databases database-update-maintenance-window",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		addonID, _ := cmd.Flags().GetString("addon-i-d")

		weekdayUTCFlag, _ := cmd.Flags().GetInt("weekday-u-t-c")

		startingHourUTCFlag, _ := cmd.Flags().GetInt("starting-hour-u-t-c")

		params := scalingo.MaintenanceWindowParams{
			WeekdayUTC:      &weekdayUTCFlag,
			StartingHourUTC: &startingHourUTCFlag,
		}

		result, err := client.DatabaseUpdateMaintenanceWindow(ctx, app, addonID, params)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initdatabasesDatabaseUpdateMaintenanceWindowCmd() {

	databasesDatabaseUpdateMaintenanceWindowCmd.Flags().StringP("app", "a", "", "app parameter")

	databasesDatabaseUpdateMaintenanceWindowCmd.Flags().String("addon-i-d", "", "addonID parameter")

	databasesDatabaseUpdateMaintenanceWindowCmd.Flags().Int("weekday-u-t-c", 0, "WeekdayUTC field")

	databasesDatabaseUpdateMaintenanceWindowCmd.Flags().Int("starting-hour-u-t-c", 0, "StartingHourUTC field")

	databasesDatabaseUpdateMaintenanceWindowCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var databasesDatabaseListMaintenanceCmd = &cobra.Command{
	Use:   "database-list-maintenance",
	Short: "Databases database-list-maintenance",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		addonID, _ := cmd.Flags().GetString("addon-i-d")

		var allResults []*scalingo.Maintenance
		page := 1
		for {
			results, meta, err := client.DatabaseListMaintenance(ctx, app, addonID, scalingo.PaginationOpts{Page: page, PerPage: 100})
			if err != nil {
				fmt.Println(render.RenderError(err))
				return err
			}
			allResults = append(allResults, results...)
			if meta.NextPage == 0 {
				break
			}
			page = meta.NextPage
		}
		result := allResults

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initdatabasesDatabaseListMaintenanceCmd() {

	databasesDatabaseListMaintenanceCmd.Flags().StringP("app", "a", "", "app parameter")

	databasesDatabaseListMaintenanceCmd.Flags().String("addon-i-d", "", "addonID parameter")

	databasesDatabaseListMaintenanceCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

var databasesDatabaseShowMaintenanceCmd = &cobra.Command{
	Use:   "database-show-maintenance",
	Short: "Databases database-show-maintenance",
	RunE: func(cmd *cobra.Command, args []string) error {
		ctx := context.Background()

		authToken, err := config.C.LoadAuth()
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		client, err := scalingo.New(ctx, scalingo.ClientConfig{
			APIToken: authToken,
			Region:   config.C.GetRegion(),
		})
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		outputFormat, _ := cmd.Flags().GetString("output")

		app, _ := cmd.Flags().GetString("app")

		addonID, _ := cmd.Flags().GetString("addon-i-d")

		maintenanceID, _ := cmd.Flags().GetString("maintenance-i-d")

		result, err := client.DatabaseShowMaintenance(ctx, app, addonID, maintenanceID)
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}

		output, err := render.RenderResult(result, render.OutputFormat(outputFormat))
		if err != nil {
			fmt.Println(render.RenderError(err))
			return err
		}
		fmt.Println(output)

		return nil
	},
}

func initdatabasesDatabaseShowMaintenanceCmd() {

	databasesDatabaseShowMaintenanceCmd.Flags().StringP("app", "a", "", "app parameter")

	databasesDatabaseShowMaintenanceCmd.Flags().String("addon-i-d", "", "addonID parameter")

	databasesDatabaseShowMaintenanceCmd.Flags().String("maintenance-i-d", "", "maintenanceID parameter")

	databasesDatabaseShowMaintenanceCmd.Flags().StringP("output", "o", "table", "Output format (table, json)")
}

// RegisterDatabasesServiceCommands registers all generated commands with the parent
func RegisterDatabasesServiceCommands(parent *cobra.Command) {
	serviceCmd := &cobra.Command{
		Use:   "databases",
		Short: "DatabasesService operations",
	}

	initdatabasesDatabaseShowCmd()
	serviceCmd.AddCommand(databasesDatabaseShowCmd)

	initdatabasesDatabaseEnableFeatureCmd()
	serviceCmd.AddCommand(databasesDatabaseEnableFeatureCmd)

	initdatabasesDatabaseDisableFeatureCmd()
	serviceCmd.AddCommand(databasesDatabaseDisableFeatureCmd)

	initdatabasesDatabaseUpdatePeriodicBackupsConfigCmd()
	serviceCmd.AddCommand(databasesDatabaseUpdatePeriodicBackupsConfigCmd)

	initdatabasesDatabaseUpdateMaintenanceWindowCmd()
	serviceCmd.AddCommand(databasesDatabaseUpdateMaintenanceWindowCmd)

	initdatabasesDatabaseListMaintenanceCmd()
	serviceCmd.AddCommand(databasesDatabaseListMaintenanceCmd)

	initdatabasesDatabaseShowMaintenanceCmd()
	serviceCmd.AddCommand(databasesDatabaseShowMaintenanceCmd)

	parent.AddCommand(serviceCmd)
}
